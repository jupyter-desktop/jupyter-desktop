# 🚧 改修および開発が必要な項目

## 統合と連携

### 1. ipyflow との統合

#### ✅ 実装済み
- **IpyflowCommService**: Comm通信によるIPyflowとの連携が実装済み
  - Comm接続の確立と維持
  - `compute_exec_schedule`メッセージの送受信
  - `ready_cells`の通知と再実行機能
- **自動再実行機能**: 変数変更時の自動再実行が実装済み
- **E2Eテスト**: 複数のテストケースで動作確認済み

#### 🔄 改善が必要な項目
- **セル間の依存関係の可視化機能**: UI上で依存関係を視覚的に表示する機能が未実装
  - 依存関係グラフの可視化
  - セル間の接続線の表示
  - 依存関係の状態表示（実行済み/未実行など）

### 2. Jupyter Server Protocol (JSP) の実装

#### ✅ 実装済み
- **主要なJSPメッセージタイプ**: 以下のメッセージタイプが実装済み
  - `execute_request` / `execute_reply`
  - `status` (idle/busy/dead)
  - `stream` (stdout/stderr)
  - `execute_result`
  - `display_data`
  - `error`
  - `interrupt_request`
- **@jupyterlab/services**: 標準ライブラリを使用した実装
- **エラーハンドリング**: 基本的なエラーハンドリングが実装済み

#### 🔄 改善が必要な項目
- **すべてのJSPメッセージタイプの対応**: 未使用のメッセージタイプの対応状況を確認
  - `comm_open` / `comm_msg` / `comm_close` (Comm通信用、IPyflowで使用)
  - `kernel_info_request` / `kernel_info_reply`
  - `shutdown_request` / `shutdown_reply`
  - その他の特殊なメッセージタイプ
- **メッセージのシリアライズ/デシリアライズ**: 複雑なデータ型の処理を強化
- **エラーハンドリングの強化**: より詳細なエラーメッセージとリトライ機能

## 機能拡張

### 3. UI/UX の改善
- **依存関係の可視化**: セル間の依存関係をグラフ形式で表示
- **実行状態の可視化**: 各セルの実行状態を視覚的に表示
- **エラーメッセージの改善**: より分かりやすいエラーメッセージの表示

### 4. パフォーマンス最適化
- **大量セル対応**: 多数のセルがある場合のパフォーマンス最適化
- **メモリ管理**: 長時間実行時のメモリリーク対策
- **通信最適化**: 不要なメッセージの送受信を削減

### 5. テストの拡充
- **統合テスト**: より多くの統合テストケースの追加
- **パフォーマンステスト**: 大量データでのパフォーマンステスト
- **エッジケースのテスト**: 異常系のテストケースの追加
